<div class="bg-red-50 min-h-screen">
  <div class="container mx-auto px-4 py-10">
    <h1 class="text-center text-4xl md:text-6xl font-artistic text-red-400 drop-shadow-lg mb-10">
      CatÃ¡logo de Mochilas Wayuu
    </h1>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 justify-items-center">
      <div
        *ngFor="let mochila of mochilas; let i = index"
        [ngClass]="colorCard(i)"
        class="relative flex w-80 flex-col rounded-xl bg-clip-border text-gray-700 shadow-md hover:scale-[1.02] transition-transform duration-300"
      >
        <!-- Imagen -->
        <div class="relative mx-4 -mt-6 h-48 overflow-hidden rounded-xl shadow-lg">
          <img
            [src]="mochila.imagen"
            [alt]="mochila.patron"
            class="w-full h-full object-cover border-2 border-white rounded-xl"
          />
        </div>

        <div class="p-6 text-center">
          <h5
            class="mb-2 block font-ubuntu text-xl font-semibold leading-snug tracking-normal text-blue-gray-900 antialiased"
          >
            TamaÃ±o: {{ mochila.medida }}
          </h5>
          <p class="text-sm text-gray-700">
            <span class="font-bold text-gray-800">Color:</span> {{ mochila.color }}
          </p>
          <p class="text-gray-800 font-bold mt-2">
            ðŸ’° {{ mochila.precioCOP | currency:'COP ':'symbol':'1.0-0' }}
          </p>
          <p class="text-gray-500 text-sm">USD {{ mochila.precioUSD }}</p>
        </div>

        <div class="p-6 pt-0 flex flex-col gap-2">
          <button
            (click)="verDetalles(mochila)"
            class="rounded-lg py-2 text-sm font-ubuntu font-bold uppercase text-white bg-blue-500 hover:bg-blue-600 shadow-md transition-all"
          >
            Ver detalles
          </button>

          <button
            (click)="realizarPedido(mochila)"
            class="rounded-lg py-2 text-sm font-ubuntu font-bold uppercase text-white bg-green-500 hover:bg-green-600 shadow-md transition-all"
          >
            Pedir ahora
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Modal -->
<div
  *ngIf="mostrarModal"
  class="fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50"
>
  <div
    class="modal-responsive bg-gradient-to-br from-white via-red-50 to-pink-100 rounded-3xl shadow-2xl w-11/12 max-w-5xl my-10 p-8 relative max-h-[95vh] overflow-y-auto animate-fadeIn"
  >
    <!-- BotÃ³n cerrar -->
    <button
      (click)="cerrarModal()"
      class="absolute top-4 right-4 bg-white text-gray-700 hover:bg-red-100 hover:text-red-500 w-10 h-10 flex items-center justify-center rounded-full shadow-md transition-all duration-300"
    >
      âœ•
    </button>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
      <!-- Imagen -->
      <div class="flex flex-col items-center justify-center gap-5">
        <div class="relative">
          <img
            [src]="mochilaSeleccionada?.imagen"
            alt="Mochila seleccionada"
            class="w-64 h-64 rounded-2xl shadow-xl object-cover border-4 border-white"
          />
          <div
            class="absolute inset-0 rounded-2xl ring-4 ring-pink-300/50 animate-pulse"
          ></div>
        </div>

        <a
          [href]="mochilaSeleccionada?.imagen"
          download="mochila-wayuu.png"
          class="bg-blue-500 hover:bg-blue-600 text-white text-sm font-semibold px-6 py-2 rounded-lg shadow-md transition-all hover:scale-105"
        >
          <i class="fa-solid fa-download mr-1"></i> Descargar imagen
        </a>

        <p class="text-center text-gray-600 text-sm font-ubuntu">
          Descargue el diseÃ±o o compÃ¡rtalo con su pedido.
        </p>
      </div>

      <!-- Detalles y formulario -->
      <div>
        <h2
          class="text-3xl font-artistic text-red-400 mb-6 text-center drop-shadow-md"
        >
          ðŸ‘œ Detalles del pedido
        </h2>

        <ul
          class="text-gray-700 mb-6 font-ubuntu bg-white/70 rounded-xl p-4 shadow-sm space-y-1"
        >
          <li>
            <span class="font-bold text-red-500">PatrÃ³n:</span>
            {{ mochilaSeleccionada?.patron }}
          </li>
          <li>
            <span class="font-bold text-red-500">Color:</span>
            {{ mochilaSeleccionada?.color }}
          </li>
          <li>
            <span class="font-bold text-red-500">TamaÃ±o:</span>
            {{ mochilaSeleccionada?.medida }}
          </li>
          <li>
            <span class="font-bold text-red-500">Costo:</span>
            {{
              mochilaSeleccionada?.precioCOP
                | currency : "COP " : "symbol" : "1.0-0"
            }}
            ({{ mochilaSeleccionada?.precioUSD }} USD)
          </li>
        </ul>

        <!-- Formulario -->
        <form #formPedido="ngForm" class="space-y-3 font-ubuntu">
          <input
            type="text"
            [(ngModel)]="datosUsuario.nombre"
            name="nombre"
            placeholder="Nombre completo"
            required
            class="w-full px-4 py-2 border-2 border-transparent rounded-lg focus:ring-2 focus:ring-red-300 focus:border-red-400 transition-all"
          />

          <input
            type="tel"
            [(ngModel)]="datosUsuario.telefono"
            name="telefono"
            placeholder="TelÃ©fono"
            required
            class="w-full px-4 py-2 border-2 border-transparent rounded-lg focus:ring-2 focus:ring-red-300 focus:border-red-400 transition-all"
          />

          <input
            type="text"
            [(ngModel)]="datosUsuario.direccion"
            name="direccion"
            placeholder="DirecciÃ³n"
            required
            class="w-full px-4 py-2 border-2 border-transparent rounded-lg focus:ring-2 focus:ring-red-300 focus:border-red-400 transition-all"
          />

          <div class="grid grid-cols-2 gap-3">
            <input
              type="text"
              [(ngModel)]="datosUsuario.ciudad"
              name="ciudad"
              placeholder="Ciudad"
              required
              class="px-4 py-2 border-2 border-transparent rounded-lg focus:ring-2 focus:ring-red-300 focus:border-red-400 transition-all"
            />

            <input
              type="text"
              [(ngModel)]="datosUsuario.departamento"
              name="departamento"
              placeholder="Departamento"
              required
              class="px-4 py-2 border-2 border-transparent rounded-lg focus:ring-2 focus:ring-red-300 focus:border-red-400 transition-all"
            />
          </div>

          <input
            type="text"
            [(ngModel)]="datosUsuario.pais"
            name="pais"
            placeholder="PaÃ­s"
            required
            class="w-full px-4 py-2 border-2 border-transparent rounded-lg focus:ring-2 focus:ring-red-300 focus:border-red-400 transition-all"
          />
        </form>

        <div
          class="mt-6 flex flex-col md:flex-row justify-between items-center gap-4"
        >
          <button
            (click)="enviarPedidoWhatsApp(formPedido)"
            [disabled]="!formPedido.valid"
            class="flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white font-bold px-6 py-3 rounded-lg shadow-md transition-all hover:scale-105 disabled:opacity-50 w-full md:w-auto"
          >
            <i class="fab fa-whatsapp text-xl"></i> Confirmar y Enviar
          </button>

          <div id="paypal-button-container" class="w-full md:w-auto"></div>
        </div>
      </div>
    </div>
  </div>
</div>
